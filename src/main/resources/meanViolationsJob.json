{
  "jobId": "meanSLAJob",
  "dataSources": [
    {
      "dataSchemaIds": [
        "temperatureSchema"
      ],
      "type": "topic",
      "topicProperties": {
        "topicName": "system.devices.*.sensors.*"
      }
    }
  ],
  "transformations": {
    "engine": "system:service:analytics:engine:sqe",
    "sqeTasks": [
      {
        "query": "from meanSLAJob_temperatureSchema#window.timeBatch(10 sec) select device,avg(temperature) as avgTemp group by device insert into averageTemperatureStream;",
        "outputs": [
          {
            "name": "meanTemperatureResult",
            "dataSchemaId": "meanTemperature"
          }
        ]
      },
      {
        "query": "from averageTemperatureStream[avgTemp > 75 or avgTemp < 65] select device,avgTemp insert into slaViolatedStream;",
        "outputs": [
          {
            "name": "meanViolatedResult",
            "dataSchemaId": "meanTemperature"
          }
        ]
      }
    ]
  },
  "exports": [
    {
      "outputName": "meanTemperatureResult",
      "type": "topic",
      "topicProperties": {
        "topicName": "meanTemperature"
      }
    },
    {
      "outputName": "meanViolatedResult",
      "type": "topic",
      "topicProperties": {
        "topicName": "meanTemperatureViolated"
      }
    }
  ]
}